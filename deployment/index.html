<html>
  <head>
    <meta charset='utf-8' />
    <title>awestruct: deploy</title>
    <link href='/news.atom' rel='alternate' type='application/atom+xml' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <style type='text/css'>
      /*<![CDATA[*/
        body {
          padding-top: 60px;
        }
      /*]]>*/
    </style>
    <link href='http://awestruct.github.com/awestruct.org/stylesheets/styles.css' rel='stylesheet' type='text/css' />
    <!--[if lt IE 9]>
      <script src='//html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
    <![endif]-->
  </head>
  <body>
    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container'>
          <a class='brand' href='http://awestruct.github.com/awestruct.org'>{:awestruct}</a>
          <ul class='nav'>
            <li>
              <a href='/'>Home</a>
            </li>
            <li>
              <a href='/news/'>News</a>
            </li>
            <li class='dropdown' id='getting-started-menu'>
              <a class='dropdown-toggle' data-toggle='dropdown' href='#getting-started-menu'>
                Documentation
                <b class='caret'></b>
              </a>
              <ul class='dropdown-menu'>
                <li>
                  <a href='/getting_started/'>Getting Started</a>
                </li>
                <li>
                  <a href='/layout/'>Project Layout</a>
                </li>
                <li>
                  <a href='/profiles/'>Site Profiles</a>
                </li>
                <li>
                  <a href='/file_types/'>File Types</a>
                </li>
                <li>
                  <a href='/skins/'>Skins</a>
                </li>
                <li>
                  <a href='/template_context/'>Template Context</a>
                </li>
                <li>
                  <a href='/deployment/'>Site Deployment</a>
                </li>
              </ul>
            </li>
            <li class='dropdown' id='extensions-menu'>
              <a class='dropdown-toggle' data-toggle='dropdown' href='#extensions-menu'>
                Extensions
                <b class='caret'></b>
              </a>
              <ul class='dropdown-menu'>
                <li>
                  <a href='/extensions/'>Overview</a>
                </li>
                <li>
                  <a href='/extensions/atomizer/'>Atomizer</a>
                </li>
                <li>
                  <a href='/extensions/data_dir/'>DataDir</a>
                </li>
                <li>
                  <a href='/extensions/disqus/'>Disqus</a>
                </li>
                <li>
                  <a href='/extensions/flattr/'>Flattr</a>
                </li>
                <li>
                  <a href='/extensions/indexifier/'>Indexifier</a>
                </li>
                <li>
                  <a href='/extensions/intense_debate/'>IntenseDebate</a>
                </li>
                <li>
                  <a href='/extensions/paginator/'>Paginator</a>
                </li>
                <li>
                  <a href='/extensions/posts/'>Posts</a>
                </li>
                <li>
                  <a href='/extensions/sitemap/'>Sitemap</a>
                </li>
                <li>
                  <a href='/extensions/tag_cloud/'>TagCloud</a>
                </li>
                <li>
                  <a href='/extensions/tagger/'>Tagger</a>
                </li>
                <li>
                  <a href='/extensions/textile/'>Textile</a>
                </li>
              </ul>
            </li>
            <li class='dropdown' id='helpers-menu'>
              <a class='dropdown-toggle' data-toggle='dropdown' href='#helpers-menu'>
                Helpers
                <b class='caret'></b>
              </a>
              <ul class='dropdown-menu'>
                <li>
                  <a href='/helpers/'>Overview</a>
                </li>
                <li>
                  <a href='/helpers/partial/'>Partial</a>
                </li>
                <li>
                  <a href='/helpers/google_analytics/'>Google Analytics</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class='container'>
      <div class='row'>
        <div class='span4'>
          <div class='hero-unit'>
            <h2>
              {:awestruct}
            </h2>
            <h3>
              Latest version is 0.2.18
            </h3>
            <p>
              A static site-baking tool.
              <br />
              Have you been awestructed?
            </p>
            <p>
              <a class='btn btn-primary btn-large' href='/getting_started/'>Get Started!</a>
            </p>
          </div>
          <div id='sidebar'>
            <ul class='nav nav-tabs nav-stacked'>
              <li>
                <a href='/gallery/'>Gallery</a>
              </li>
              <li>
                <a href='/source/'>Source Code</a>
              </li>
              <li>
                <a href='/yardoc/'>API Documentation</a>
              </li>
              <li>
                <a href='mailto:talk-subscribe@awestruct.org?subject=subscribe'>Mailing List</a>
              </li>
              <li>
                <a href='http://awestruct-talk.22250.n6.nabble.com/'>List Archives</a>
              </li>
              <li>
                <a href='http://twitter.com/awestructed'>Twitter</a>
              </li>
            </ul>
          </div>
        </div>
        <div class='span8'>
          
          
          <div class="page-header">
          <h1>Deploy</h1>
          </div>
          
          
          <p>Awestruct makes deploying your site easy. There are two ways to deploy:
          to <a href="http://pages.github.com">GitHub Pages</a>, or to an arbitrary server
          using <code>rsync</code> and <code>ssh</code>.  You use <a href="/profiles/">site profiles</a>, to configure
          your deployment. Once you're configured, deploying is just a single command.</p>
          
          <pre><code>$ awestruct -P production --deploy&#x000A;</code></pre>
          
          <h2>GitHub Pages</h2>
          
          <p>To deploy your site to GitHub pages, you will need to be using [GitHub]
          (http://github.com) as a source repository for the site you want to pubish.</p>
          
          <p><span class="label label-info">Configuration</span></p>
          
          <p>Open <code>_config/site.yml</code> file and add a deployment profile. Set <code>host</code> to
          <code>github_pages</code> and set the <code>base_url</code> to the github pages URL. This can be your
          own domain if you set it up correctly in github. In this example, it's just the
          default domain that github provides.</p>
          
          <pre><code>profiles: &#x000A;  production: &#x000A;    base_url: http://awestruct.github.com/github_pages &#x000A;    deploy: &#x000A;      host: github_pages &#x000A;</code></pre>
          
          <p>This will publish your site to the default <code>gh-pages</code> branch, used by GitHub
          for site publication. To publish to the master branch, add <code>branch: master</code>
          to your deployment yaml.</p>
          
          <pre><code>profiles: &#x000A;  production: &#x000A;    base_url: http://awestruct.github.com/github_pages &#x000A;    deploy: &#x000A;      host: github_pages &#x000A;      branch: master&#x000A;</code></pre>
          
          <h2>Rsync and SSH</h2>
          
          <p>Rsync and SSH require a little more configuration than GitHub pages, but
          in general, this is the more flexible option. Since this deployment method
          depends on SSH, make sure you have your public and private keys setup on
          your server and local system before deploying.</p>
          
          <p><span class="label label-info">Configuration</span></p>
          
          <p>In your <code>_config/site.yml</code>, you should define a <code>profiles</code> block,
          and a profile for each deployment environment.  The names are
          arbitrary.</p>
          
          <p>Make sure <code>base_url</code> is set correctly for each profile.</p>
          
          <p>To these profiles, add a <code>deploy</code> hash with <code>host</code> and <code>path</code> properties to specify
          where the resulting site should be copied to using <code>rsync</code>.</p>
          
          <pre><code>profiles:&#x000A;  development:&#x000A;  staging:&#x000A;    base_url: http://staging.awestruct.org/&#x000A;    deploy:&#x000A;      host: awestruct.org&#x000A;      path: /var/www/domains/awestruct.org/staging/htdocs/ &#x000A;  production:&#x000A;    base_url: http://awestruct.org/&#x000A;    deploy:&#x000A;      host: awestruct.org&#x000A;      path: /var/www/domains/awestruct.org/www/htdocs/ &#x000A;</code></pre>
          
          <p><span class="label label-info">Info</span></p>
          
          <p>The <code>rsync</code> command executed looks like</p>
          
          <pre><code>rsync -rv --delete _site/ #{host}:#{path}&#x000A;</code></pre>
        </div>
      </div>
      <div class='row'>
        <hr />
        <footer>
          <p>&copy; Bob McWhirter 2012</p>
          <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'></script>
          <script src='http://awestruct.github.com/awestruct.org/javascript/bootstrap-dropdown.js' type='text/javascript'></script>
        </footer>
      </div>
    </div>
  </body>
</html>
